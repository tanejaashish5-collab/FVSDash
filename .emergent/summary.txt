<analysis>**original_problem_statement:**
The user's objective is to build a comprehensive content lifecycle management system, ForgeVoice Studio. The current sprint, **Sprint 10: UI Wiring + Foundation Fixes**, focuses on wiring up the remaining UI components to the backend services created in Sprint 9, and fixing a list of critical bugs and UI/UX issues identified in a recent audit.

**PRODUCT REQUIREMENTS (Sprint 10):**

*   **Part A (P0): FVS System - Wire AI Recommendations:** Replace the static ideas table with live AI recommendations from , display them as interactive cards, and add a button to trigger new scans.
*   **Part B (P0): Analytics Page - Add Trend Intelligence Tab:** Add a Trend Intelligence tab to the analytics page to display competitor data and trending keywords.
*   **Part C (P1): Overview Dashboard - Real Channel Data:** Update the main dashboard cards and add a Channel Health section to show live data (subscribers, total views, best video) from the analytics endpoints.
*   **Part D (P1): ROI Center - Fix Calculation:** Rework the ROI calculation to use a YouTube-native model based on CPM and sponsorship value, pulling metrics from the analytics backend.
*   **Part E (P1): Critical Bug Fixes:**
    1.  Implement automatic YouTube token refresh logic.
    2.  Replace generic blog content with 5 Chanakya Sutra-themed articles.
    3.  Fix the Failed to load help data error toast.
    4.  Pre-populate the Tone field in the Strategy Lab from the user's channel profile.
    5.  Show image previews for thumbnail assets on the Assets page.
*   **Part F (P1): Navigation Cleanup:** Rename Deliverables to Production Files and add a video count badge to the Submissions sidebar link.

**User's preferred language**: English

**what currently exists?**
The application is a full-stack system (FastAPI, React, MongoDB) with a glass-morphic Aura UI. It has a real Google OAuth 2.0 flow connected to the user's YouTube channel. The backend features a complete analytics pipeline () and a Gemini-powered Trend Intelligence Engine () which sync real data and generate content ideas.

In the last session, the agent successfully wired up the frontend pages (, , ) to these new backend services, completing the full scope of Sprint 9. The user's YouTube Data API key was also added to the environment. The application is fully functional and tested.

**Last working item**:
    - Last item agent was working: The agent received the new requirements for **Sprint 10** and began the initial exploration phase by viewing the relevant frontend and backend files to understand the scope of the required changes.
    - Status: IN PROGRESS
    - Agent Testing Done: N
    - Which testing method agent to use? both
    - User Testing Done: N

**All Pending/In progress Issue list**:
  - Issue 1:  YouTube token does not auto-refresh (P1)
  - Issue 2:  Failed to load help data toast shows on Help & Support page (P1)

  Issues Detail:
  - Issue 1:
     - Attempted fixes: None. This is a new bug report from the Sprint 10 audit.
     - Next debug checklist:
        - Modify API client/service logic to catch 401 errors.
        - Upon catching a 401, trigger a request to a new backend endpoint (e.g., ) that uses the stored  to get a new .
        - Update the user's credentials in the database.
        - Retry the original failed API call.
        - Only show the Token Expired status in the UI if the refresh attempt also fails.
     - Why fix this issue and what will be achieved with the fix?: This will prevent user friction by ensuring seamless, uninterrupted access to the YouTube API without requiring manual re-authentication.
     - Status:  NOT STARTED
     - Is recurring issue? N
     - Should Test frontend/backend/both after fix?: backend
     - Blocked on other issue: None
  - Issue 2:
     - Attempted fixes: None. This is a new bug report.
     - Next debug checklist:
        - Investigate the backend endpoint responsible for fetching help data.
        - Ensure it returns an empty list  instead of an error when no data is found.
        - Update the frontend component to handle an empty list gracefully, showing a message like No help articles available yet instead of triggering an error toast.
     - Why fix this issue and what will be achieved with the fix?: Improves user experience by replacing an unnecessary error with a clean empty state.
     - Status:  NOT STARTED
     - Is recurring issue? N
     - Should Test frontend/backend/both after fix?: both
     - Blocked on other issue: None

**In progress Task List**:
  - Task 1:  Sprint 10 Implementation (P0)

 Task Detail:
  - Task 1:
     - Where to resume: The agent has already viewed the relevant files. The next step is to begin implementing the changes for Sprint 10, starting with Part A (FVS System page).
     - What will be achieved with this?: Complete UI wiring and fix critical bugs as per the user's detailed Sprint 10 prompt.
     - Status:  IN PROGRESS
     - Should Test frontend/backend/both after fix?: both
     - Blocked on something: None

**Upcoming and Future Tasks**
- **Upcoming Tasks:**
    - P0: **Part A:** Wire AI Recommendations on FVS System Page.
    - P0: **Part B:** Add Trend Intelligence Tab to Analytics Page.
    - P1: **Part C:** Wire Real Channel Data to Overview Dashboard.
    - P1: **Part D:** Fix ROI Center Calculation Logic.
    - P1: **Part E:** Update Blog Content, Fix Strategy Lab Tone, and Fix Asset Thumbnails.
    - P1: **Part F:** Clean up navigation (Rename Deliverables, Add Submissions Badge).
    - P1: Implement full OAuth integration for TikTok and Instagram Reels.
    - P1: Add a Quick Test Upload helper for developers.
- **Future Tasks:**
    - P1: Refactor media services to make S3 the primary and non-fallback storage mechanism.
    - P2: Integrate Stripe to replace the mocked billing system.
    - P2: Implement a real integration for the Runway video provider.
    - P2: Add a feature for admins to onboard new clients directly from the admin panel.

**Completed work in this session**
- **Sprint 9 - Frontend Wiring (DONE):**
  - **YouTube API Key**: Added the user-provided  to  and restarted the backend.
  - **Overview Page**: Wired to  to show live subscriber count, total views, and best performing video.
  - **FVS System Page**: Wired to  and  to display AI-generated ideas and competitor shorts.
  - **ROI Center Page**: Updated to show an appropriate Not enough data message, correctly handling the empty state post-data-wipe.
  - **Analytics Page**: Verified it continues to show live data correctly.
- **End-to-End Testing (DONE):**
  - Invoked , which confirmed all 25 backend tests and 7 frontend features passed successfully.
- **Documentation (DONE):**
  - Updated  with the completed work.

**Earlier issues found/mentioned but not fixed**
These are now the primary targets of Sprint 10.
- **Issue 1:** YouTube token requires manual refresh.
- **Issue 2:** Generic blog content needs to be replaced.
- **Issue 3:** Help & Support page shows an error toast on empty data.
- **Issue 4:** Strategy Lab tone field isn't pre-populated.
- **Issue 5:** Asset page doesn't show thumbnail previews.

**Known issue recurrence from previous fork**
  - None.

**Code Architecture**


**Key Technical Concepts**
- **Frontend**: React, React Router, Tailwind CSS, Shadcn UI, Framer Motion.
- **Backend**: FastAPI, Pydantic, APScheduler for cron jobs.
- **Database**: MongoDB.
- **Authentication**: Real Google OAuth 2.0 PKCE flow.
- **3rd Party APIs**: YouTube Data API v3, YouTube Analytics API (fallback implemented).
- **LLM**: Gemini 2.0 Flash via .

**key DB schema**
  - **youtube_analytics**: , , , , , .
  - **channel_snapshots**: , , , , .
  - **competitor_videos**: , , , , .
  - **trending_topics**: , , , .
  - **fvs_recommendations**: , , .

**changes in tech stack**
  - No new changes in this session. , , , and  were added previously.

**All files of reference**
-  (Updated in last session)
-  (Updated in last session)
-  (Updated in last session)
-  (Updated in last session)
-  (Updated with API Key)
-  (Updated)
-  (To be modified in Sprint 10)
-  (To be modified in Sprint 10)
-  (To be modified in Sprint 10)
-  (To be modified in Sprint 10)

**Areas that need refactoring**:
- **ROI Center Calculation**: The logic needs a complete overhaul as per Sprint 10, Part D.
- **API Error Handling**: Needs to be improved to implement YouTube token auto-refresh as per Sprint 10, Part E.

**key api endpoints**
- 
- 
- 
- 
- 

**Critical Info for New Agent**
- You are starting **Sprint 10**. The previous agent has already explored the necessary files. Your task is to begin implementation immediately.
- The user has provided a very detailed, multi-part prompt for Sprint 10. Follow it precisely, addressing each part from A to F.
- Prioritize the P0 tasks: wiring up the FVS System and Analytics pages.
- The bug fixes in Part E are critical. The YouTube token auto-refresh is especially important for app stability.
- All backend data required for this sprint already exists and is accessible via the established API endpoints. This sprint is almost entirely frontend work and targeted backend fixes.
- Refer to the user's prompt in the message history for specific UI/UX details, such as card layouts, button functionality, and loading state text.

**documents and test reports created in this job**
- 
-  (Result of testing agent run after Sprint 9 wiring)

**Last 10 User Messages and any pending HUMAN messages**
1.  **Agent**: Tested backend endpoints, they worked.
2.  **Agent**: Took a screenshot of the login page, which failed.
3.  **Agent**: Corrected selectors and took a successful screenshot of the Overview page showing live data.
4.  **Agent**: Took a successful screenshot of the FVS System page showing AI recommendations.
5.  **Agent**: Took a successful screenshot of the ROI page showing the correct empty state.
6.  **Agent**: Took a successful screenshot of the Analytics page showing live charts.
7.  **Agent**: All UI wiring for Sprint 9 is complete. Called the testing agent for final verification.
8.  **Agent**: Received successful test results from the testing agent.
9.  **Agent**: Updated PRD.md and finished the task, summarizing the completion of Sprint 9.
10. **User**: Provided the detailed prompt for **Sprint 10: UI Wiring + Foundation Fixes**.

**Project Health Check:**
- **Broken**: None. The bugs identified in Sprint 10 are quality-of-life issues, not critical failures.
- **Mocked**:
    - **Video Generation**: The  provider integration.
    - **Stripe Payments**: The billing system.

**3rd Party Integrations**
- **YouTube Data API v3 & Analytics API**: Live integration for channel data sync and public searches — **User API Key is provided and active**.
- **Google OAuth 2.0**: Live integration for user authentication.
- **Gemini 2.0 Flash (Text Generation)**: Integrated via  — uses **Emergent LLM Key**.
- **ElevenLabs (Voice Generation)**: Integrated — requires User API Key.
- **Runway (Video Generation)**: Mocked — requires User API Key.
- **Stripe (Payments)**: Mocked — requires User API Key.

**Testing status**
  - Testing agent used after significant changes: YES (After completing Sprint 9 frontend wiring)
  - Troubleshoot agent used after agent stuck in loop: NO
  - Test files created: []
  - Known regressions: None.

**Credentials to test flow:**
-   **Client**:  / 
-   **Admin**:  / 

**What agent forgot to execute**
The previous agent successfully completed all assigned tasks (Sprint 9 frontend wiring). The current agent has received the new tasks for Sprint 10 and has just begun the exploration phase. No tasks have been forgotten.</analysis>
